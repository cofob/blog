---
author: cofob
title: Тех. обслуживание сервисов
date: 2022-06-16
slug: maintenance-22-06-16
categories:
  - Тех. обслуживание
---

# Тех. обслуживание сервисов за 2022 06 16

Заняло 2 полных дня. Никакие данные не потеряны.

## Проблемы

- MariaDB база данных перестала отвечать на запросы
- Java начала потреблять все ресурсы сервера
- Сервер был засорён старыми программами, которые более не используются
- На бэкап-сервере не была установлена ОС

## Что было сделано

- Переустановлены ОС сначала на бэкап-сервере, а после и на основном
- Docker полностью заменён на podman
- Все сервисы теперь работают в rootless режиме и ограничены по ресурсам
- Основной (main) сервер переименован в diamond
- Полный переход всех серверов на nftables
- Все сервера поставлены на полный мониторинг всех систе
